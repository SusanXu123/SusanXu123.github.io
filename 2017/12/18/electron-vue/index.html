<!DOCTYPE html><html><head><meta charset="UTF-8"><title>用 electron-vue 脚手架 和 builder 构建一个mac环境下的demo</title><link rel="stylesheet" href="http://obfnm2kw5.bkt.clouddn.com/normalize.css"><link rel="stylesheet" href="/css/hexo-theme-adoubi.css"><link rel="icon" href="/images/favicon.ico"></head><body><div class="header"><div class="header__title"><a href="/"><figure class="header__title__image"></figure></a></div><div class="header__archive"><a href="/archives"><figure class="header__archive__image"></figure><span class="header__archive__title">archive</span></a></div><div class="header__about"><a href="/about"><figure class="header__about__image"></figure><span class="header__about__title">about</span></a></div><div class="header__github"><a href="https://github.com/shinux" target="_blank"><figure class="header__github__image"></figure><span class="header__github__title">github</span></a></div><div class="header__feed"><a href="/atom.xml"><figure class="header__feed__image"></figure><span class="header__feed__title">feed</span></a></div><div class="header__notes"></div></div><div class="content"><div class="post-item"></div><h2 class="post-title-wrapper"><p class="post-title">用 electron-vue 脚手架 和 builder 构建一个mac环境下的demo</p></h2><div class="post-date"><time datetime="2017-12-18T09:04:18.000Z">2017-12-18</time></div><div class="post-content"><h3 id="参考文档："><a href="#参考文档：" class="headerlink" title="参考文档："></a>参考文档：</h3><ol>
<li>electron中文网：<a href="https://electron.org.cn/vue/index.html" target="_blank" rel="noopener">https://electron.org.cn/vue/index.html</a> <br><br>2.mac环境，利用builder构建electron+vue的demo: <a href="https://newsn.net/say/electron-vue-demo-mac-builder.html" target="_blank" rel="noopener">https://newsn.net/say/electron-vue-demo-mac-builder.html</a></li>
</ol>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><h4 id="1-html-webpack-plugin"><a href="#1-html-webpack-plugin" class="headerlink" title="1. html-webpack-plugin"></a>1. html-webpack-plugin</h4><p>description: 通过配置webpack config，利用index.ejs生成index.html <br><br>github: <a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noopener">https://github.com/jantimon/html-webpack-plugin</a></p>
<h4 id="2-vue-electron"><a href="#2-vue-electron" class="headerlink" title="2. vue-electron"></a>2. vue-electron</h4><p>description: 将 electron API 附加到 Vue 对象的 vue 插件，即使所有组件可以通过 this.$electron 访问 electron API 的简单的 vue 插件，不再需要将 electron 导入到每一个组件中。<br><br>github: <a href="https://github.com/SimulatedGREG/vue-electron" target="_blank" rel="noopener">https://github.com/SimulatedGREG/vue-electron</a></p>
<h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h3><h4 id="1-初始化项目"><a href="#1-初始化项目" class="headerlink" title="1.初始化项目"></a>1.初始化项目</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install -g vue-cli</div><div class="line">vue init simulatedgreg/electron-vue my-project</div></pre></td></tr></table></figure>
<p>这个命令执行完毕后，会出现很多设置项询问项目，出现在命令行里面，我们需要跟进提示，进行操作。<br>选择vue的插件，我们直接回车，默认安装全部插件即可。<br>语法习惯检查，Standard/airbnb都可以，<br>测试部分，根据项目的需求，默认是安装<br>构建的方式，我们选择更加先进的electron-builde，electron-packager适合练习做的小案例<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">~/xuJuan/studySpace » vue init simulatedgreg/electron-vue my-project                                                                                                         xiaojuan@xiaojuandeMacBook-Pro</div><div class="line"></div><div class="line">  A newer version of vue-cli is available.</div><div class="line"></div><div class="line">  latest:    2.9.2</div><div class="line">  installed: 2.8.2</div><div class="line"></div><div class="line">? Application Name my-project</div><div class="line">? Project description An electron-vue project</div><div class="line">? Select <span class="built_in">which</span> Vue plugins to install axios, vue-electron, vue-router, vuex</div><div class="line">? Use linting with ESLint? Yes</div><div class="line">? Which eslint config would you like to use? Standard</div><div class="line">? Setup unit testing with Karma + Mocha? Yes</div><div class="line">? Setup end-to-end testing with Spectron + Mocha? Yes</div><div class="line">? What build tool would you like to use? builder</div><div class="line">? author xiaojuan &lt;&gt;</div><div class="line"></div><div class="line">   vue-cli · Generated <span class="string">"my-project"</span>.</div><div class="line"></div><div class="line">---</div><div class="line"></div><div class="line">All set. Welcome to your new electron-vue project!</div><div class="line"></div><div class="line">Make sure to check out the documentation <span class="keyword">for</span> this boilerplate at</div><div class="line">https://simulatedgreg.gitbooks.io/electron-vue/content/.</div><div class="line"></div><div class="line">Next Steps:</div><div class="line"></div><div class="line">  $ <span class="built_in">cd</span> my-project</div><div class="line">  $ yarn (or `npm install`)</div><div class="line">  $ yarn run dev (or `npm run dev`)</div></pre></td></tr></table></figure></p>
<p>配置完后，my-project 项目即生成</p>
<h4 id="2-安装依赖"><a href="#2-安装依赖" class="headerlink" title="2.安装依赖"></a>2.安装依赖</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install <span class="comment"># 或者 yarn install</span></div></pre></td></tr></table></figure>
<h4 id="3-运行项目并调试"><a href="#3-运行项目并调试" class="headerlink" title="3.运行项目并调试"></a>3.运行项目并调试</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run dev</div></pre></td></tr></table></figure>
<p>这个时候，执行的js是：src/main/index.dev.js，我们需要注意里面的如下语句：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'electron-debug'</span>)(&#123; <span class="attr">showDevTools</span>: <span class="literal">true</span> &#125;)</div></pre></td></tr></table></figure></p>
<p>这里就是用于控制浏览器的devtools的。</p>
<h4 id="4-打包"><a href="#4-打包" class="headerlink" title="4. 打包"></a>4. 打包</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run build:dir</div></pre></td></tr></table></figure>
<p>npm run build:dir 与 npm run build只会打包，但不会生成dmg文件，减少打包时间，便于打包测试</p>
<h4 id="5-生成可执行文件dmg"><a href="#5-生成可执行文件dmg" class="headerlink" title="5. 生成可执行文件dmg"></a>5. 生成可执行文件dmg</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run build</div></pre></td></tr></table></figure>
<p>build之后，我们就可以拿到我们的第一个mac程序的dmg文件了，dmg的路径在my-project/build/下面。拖动一下即可安装完成</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// src/main/index.js的ready函数里，在开发环境可以增加调试，</span></div><div class="line">mainWindow.webContents.openDevTools()</div></pre></td></tr></table></figure>
<h3 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h3><h5 id="1-关于安装依赖"><a href="#1-关于安装依赖" class="headerlink" title="1.关于安装依赖"></a>1.关于安装依赖</h5><p>用脚手架装好之后，一定要用npm install, 不能用cnpm，否则打包的时候，有些模块会找不到</p>
<h5 id="2-打包后的调试"><a href="#2-打包后的调试" class="headerlink" title="2.打包后的调试"></a>2.打包后的调试</h5><p>前面说到运行项目适合可以调试，下面一段代码可以让我们打包后生成的应用自动打开调试工具，但是注意开发完成后要注释掉</p>
</div></div><div class="footer"><div class="footer-copyright">Theme By <a href="https://github.com/shinux/hexo-theme-adoubi">Adoubi</a> , Powered By Hexo.</div></div></body></html>